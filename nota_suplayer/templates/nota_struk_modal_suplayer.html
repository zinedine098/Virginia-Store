{% load static %}
<div class="container-fluid mt-3">
  <div class="struk-container mx-auto" id="struk-cetak" id="hitam">
    
      <!-- Header Atas -->
      <div class="d-flex justify-content-between align-items-start" id="hitam">
        <div>
          <p class="small m-0">{{ nota.created_at|date:"d/m/y, H:i A" }}</p>
          <p class="small m-0">Virginia | Nota Suplayer</p>
        </div>
        <div class="text-end">
          <p class="small m-0 fw-bold">INVOICE{{ nota.id }}</p>
        </div>
      </div>

      <hr class="my-1">

      <!-- Bagian Logo + Nama + Informasi -->
      <div class="d-flex align-items-start">
        <!-- Logo -->
        <img src="{% static 'image/logo.png' %}" 
                alt="Logo" 
                class="me-3 align-middle" 
                style="height: 112px; width: auto; display: inline-block; vertical-align: middle;">

        <!-- Bagian Teks -->
        <div class="flex-grow-1">
          <h3 class="m-0 fw-bold" id="hitam">VIRGINIA</h3>

          <!-- Informasi Toko -->
          <div class="row mt-1" style="font-size: 10px;">
            <div class="col-8">
              <p class="m-0" id="hitam"><strong>ADDRESS</strong> : {{ informasi_toko.address|default:"Jl. Raya Legian kelod No. 393 KUTA - BALI" }}</p>
              <p class="m-0" id="hitam"><strong>FACTORY</strong> : {{ informasi_toko.factory|default:"Jl. Raya Tuban Gg. Danasari No.16 Y KUTA-BALI-INDONESIA, 80361" }}</p>
              <p class="m-0" id="hitam"><strong>PHONE</strong> : {{ informasi_toko.phone|default:"(+62) 87862223989, (+62) 81236060500" }}</p>
              <p class="m-0" id="hitam"><strong>MOBILE</strong> : {{ informasi_toko.mobile|default:"(+62) 8124656880" }}</p>
              <p class="m-0" id="hitam"><strong>EMAIL</strong> : {{ informasi_toko.email|default:"harrykweel@hotmail.com" }}</p>
            </div>
            <!-- Kolom Kanan -->
            <div class="col-4 d-flex flex-column justify-content-between text-end align-items-end" id="hitam">
              <p class="m-0"><strong>DATE</strong> : {{ nota.created_at|date:"d M Y" }}</p>
              <p class="m-0"><strong>SUPLIER</strong> : {{ nota.suplayer.nama|default:"Umum" }}</p>
              <p class="m-0"><strong>TANGGAL SISA BAYAR</strong> : {{ nota.tanggal_sisa_bayar|date:"d M Y" }}</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Tabel Produk -->
      <table class="table table-bordered mt-3 text-center align-middle">
        <thead>
          <tr>
            <th>BARCODE</th>
            <th>PICTURES</th>
            <th>ITEM NAME</th>
            <th>QTY</th>
            <th>PRICE</th>
            <th>AMOUNT</th>
          </tr>
        </thead>
        <tbody>
          {% for item in items %}
          <tr>
            <td>{{ item.kode_barang }}</td>
            <td>
              {% if item.gambar %}
                <img src="{% if item.gambar|slice:":6" == "/media" %}{{ item.gambar }}{% else %}/media/{{ item.gambar }}{% endif %}" class="foto-produk">
              {% else %}
                <span>-</span>
              {% endif %}
            </td>
            <td>{{ item.nama_barang }}</td>
            <td>{{ item.jumlah_barang }}</td>
            <td>Rp. {{ item.harga|floatformat:0 }}</td>
            <td>Rp. {{ item.subtotal|floatformat:0 }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="6">Tidak ada data produk</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      <!-- Bagian Total -->
      <table class="table table-bordered text-end">
        <tr>
          <td><strong>TOTAL</strong></td>
          <td style="width: 120px;"><strong>Rp. {{ nota.total_bayar|floatformat:0 }}</strong></td>
        </tr>
        <tr>
          <td><strong>DP</strong></td>
          <td style="width: 120px;"><strong>Rp. {{ nota.dp|floatformat:0 }}</strong></td>
        </tr>
        <tr>
          <td><strong>SISA BAYAR</strong></td>
          <td style="width: 120px;"><strong>Rp. {{ nota.sisa|floatformat:0 }}</strong></td>
        </tr>
      </table>

  </div>
</div>

<!-- CSS -->

<style>
#hitam {
  color: black;
}

.struk-container {
  width: 100%;
  max-width: 820px;
  border: none;
  padding: 10px;
  font-family: Arial, Helvetica, sans-serif;
  background-color: #fff;
  margin: 0 auto;
}

/* === LOGO DAN TEKS === */
.logo-img {
  width: 80px;
  height: auto;
  object-fit: contain;
  align-self: center;
}

h3 {
  line-height: 1;
}

/* === TABEL === */
.table {
  font-size: 14px;
  border-color: #000;
  --bs-table-color: black;
  --bs-table-bg: #fff;
}

.table th, .table td {
  border: 1px solid #000 !important;
  padding: 4px;
  color: black !important;
  background-color: #fff !important;
}

.foto-produk {
  width: 60px;
  height: 60px;
  object-fit: cover;
}

hr {
  border: none;
  border-top: 1px solid #000;
}

/* === MODE CETAK === */
@media print {
  body * {
    visibility: hidden !important;
  }

  #struk-cetak, #struk-cetak * {
    visibility: visible !important;
  }

  #struk-cetak {
    position: fixed !important;
    left: 0;
    top: 0;
    width: 100% !important;
    padding: 5mm !important;
    background-color: #fff !important;
  }

  .d-print-none {
    display: none !important;
  }

  @page {
    size: auto;
    margin: 5mm !important;
  }
}
</style>

  </div>

  <!-- Tombol -->
  <div class="text-center mt-3 d-print-none">
    <button class="btn btn-primary btn-sm" onclick="window.print()">Cetak Struk</button>
    <a href="{% url 'nota_suplayer:cetak-nota-kosong' %}" class="btn btn-secondary btn-sm">Kembali</a>
  </div>
</div>
